
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.mailcow.email/third_party/roundcube/third_party-roundcube/">
      
      
        <link rel="prev" href="../../portainer/third_party-portainer/">
      
      
        <link rel="next" href="../../prometheus_exporter/third_party-prometheus_exporter/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Roundcube - mailcow: dockerized documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Roundcube - mailcow: dockerized documentation" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://docs.mailcow.email/assets/images/social/third_party/roundcube/third_party-roundcube.en.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.mailcow.email/third_party/roundcube/third_party-roundcube/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Roundcube - mailcow: dockerized documentation" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://docs.mailcow.email/assets/images/social/third_party/roundcube/third_party-roundcube.en.png" >
      
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-roundcube" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            

  <center><h4>All Commands are available according to the <a style="color:#6390e5;" href="https://docs.docker.com/compose/install/linux/">Docker Compose Plugin</a> and the <a style="color:#6390e5;" href="https://docs.docker.com/compose/install/other/">Standalone Version</a> syntax</h4></center>


          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="mailcow: dockerized documentation" class="md-header__button md-logo" aria-label="mailcow: dockerized documentation" data-md-component="logo">
      
  <img src="../../../assets/images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mailcow: dockerized documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Roundcube
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../de/third_party/roundcube/third_party-roundcube/" hreflang="de" class="md-select__link">
              Deutsch
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/mailcow/mailcow-dockerized" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mailcow/mailcow-dockerized
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="mailcow: dockerized documentation" class="md-nav__button md-logo" aria-label="mailcow: dockerized documentation" data-md-component="logo">
      
  <img src="../../../assets/images/logo.svg" alt="logo">

    </a>
    mailcow: dockerized documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mailcow/mailcow-dockerized" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    mailcow/mailcow-dockerized
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Information & Support
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Get started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Get started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getstarted/prerequisite-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prepare your system
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getstarted/prerequisite-dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getstarted/install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install mailcow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Maintaining mailcow
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Maintaining mailcow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintenance/update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintenance/migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintenance/deinstall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deinstallation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Backup & Restore
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Backup & Restore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Component backup & restore
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Component backup & restore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup_restore/b_n_r-backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup_restore/b_n_r-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Restore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup_restore/b_n_r-backup-export/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup_restore/b_n_r-coldstandby/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cold-standby (rolling backup)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Manual backups
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Manual backups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup_restore/b_n_r-backup_restore-maildir/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maildir
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup_restore/b_n_r-backup_restore-mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MySQL (mysqldump)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    mailcow-internal backups
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            mailcow-internal backups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup_restore/b_n_r-accidental_deletion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recover accidentally deleted data
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Post Installation Tasks
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Post Installation Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-ssl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced SSL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-authorize_watchdog_and_bounces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authorize Watchdog and Bounce Mails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-disable_ipv6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disable IPv6
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-dmarc_reporting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DMARC Reporting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-ip_bindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IP bindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-local_mta/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local MTA on Docker host
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reverse Proxy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            Reverse Proxy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/reverse-proxy/r_p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/reverse-proxy/r_p-apache24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apache 2.4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/reverse-proxy/r_p-nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/reverse-proxy/r_p-haproxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HAProxy (community supported)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/reverse-proxy/r_p-traefik3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Traefik v3 (community supported)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/reverse-proxy/r_p-caddy2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caddy v2 (community supported)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-snat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SNAT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../post_installation/firststeps-sync_jobs_migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync job migration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../models/model-acl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../models/model-passwd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Password hashing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../models/model-sender_rcv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sender and receiver model
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    General Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            General Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-admin_login_sogo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Admin login to SOGo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-rspamd_memory_leaks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced: Find memory leaks in Rspamd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-attach_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attach to a Container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-common_problems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common Problems
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-mysql_upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual MySQL upgrade
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-mysql_aria/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recover crashed Aria storage engine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-rm_volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remove Persistent Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-resend-quarantine-notifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resend Quarantine Notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-reset_pw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reset Passwords (incl. SQL)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/debug-reset_tls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reset TLS certificates
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Manual/Guides/Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Manual/Guides/Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    mailcow UI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            mailcow UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-bl_wl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blacklist / Whitelist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-css/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSS overrides
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-forgot_password/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Forgot Password Feature
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-netfilter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Netfilter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-notification-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notification templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-pushover/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pushover
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-spamfilter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spamfilter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-sub_addressing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sub-addressing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tags (for Domains and Mailboxes)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-spamalias/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Temporary email aliases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-tfa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Two-Factor Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-fido/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebAuthn / FIDO2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-keycloak/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Keycloak
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/mailcow-UI/u_e-mailcow_ui-generic-oidc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generic-OIDC
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Postfix
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            Postfix
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-unauthenticated-relaying/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unauthenticated Relaying
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-custom_transport/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom transport maps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-extra_cf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customize/Expand main.cf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-disable_sender_verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disable Sender Addresses Verification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-harden_ciphers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardening Ciphers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-attachment_size/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Max. message size (attachment size)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-relayhost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Relayhosts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-pflogsumm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Statistics with pflogsumm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Postfix/u_e-postfix-postscreen_whitelist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Whitelist IP in Postscreen
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unbound
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            Unbound
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Unbound/u_e-unbound-fwd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using an external DNS service
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Dovecot
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4">
            <span class="md-nav__icon md-icon"></span>
            Dovecot
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-extra_conf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customize/Expand dovecot.conf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-any_acl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enable "any" ACL settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-expunge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Expunge a Users mails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-fts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Full-Text Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-harden_ciphers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardening Ciphers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-idle_interval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IMAP IDLE interval
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-lazy_expunge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lazy Expunge (Dovecot Plugin)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-mail-crypt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mail crypt
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-more/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    More Examples with DOVEADM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-vmail-volume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Move Maildir (vmail)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Performance Optimizations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-public_folder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Public folders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-static_master/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Static master user
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Dovecot/u_e-dovecot-catchall_vacation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vacation replies for catchall addresses
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5" >
        
          
          <label class="md-nav__link" for="__nav_8_5" id="__nav_8_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nginx
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_5">
            <span class="md-nav__icon md-icon"></span>
            Nginx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Nginx/u_e-nginx_webmail-site/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create subdomain webmail.example.org
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Nginx/u_e-nginx_custom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom sites
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_6" >
        
          
          <label class="md-nav__link" for="__nav_8_6" id="__nav_8_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Watchdog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_6">
            <span class="md-nav__icon md-icon"></span>
            Watchdog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Watchdog/u_e-watchdog-thresholds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thresholds
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Redis/u_e-redis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_8" >
        
          
          <label class="md-nav__link" for="__nav_8_8" id="__nav_8_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Rspamd
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_8">
            <span class="md-nav__icon md-icon"></span>
            Rspamd
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Rspamd/u_e-rspamd-general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Rspamd/u-e-rspamd-tweaks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tweaks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Rspamd/u-e-rspamd-work-with-spamdata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Work with Spam Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Rspamd/u_e-rspamd-disable-greylisting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Disable Greylisting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Rspamd/u-e-rspamd-add-additional-modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add Additional Modules
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_9" >
        
          
          <label class="md-nav__link" for="__nav_8_9" id="__nav_8_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ClamAV
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_9">
            <span class="md-nav__icon md-icon"></span>
            ClamAV
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/ClamAV/u_e-clamav-whitelist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Whitelist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/ClamAV/u_e-clamav-additional_dbs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Additional Databases
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/SOGo/u_e-sogo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SOGo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_11" >
        
          
          <label class="md-nav__link" for="__nav_8_11" id="__nav_8_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_11">
            <span class="md-nav__icon md-icon"></span>
            Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/Docker/u_e-docker-cust_dockerfiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customize Dockerfiles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/u_e-why_unbound/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why unbound?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/u_e-autodiscover_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autodiscover / Autoconfig
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/u_e-80_to_443/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Redirect HTTP to HTTPS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/u_e-reeanble-weak-protocols/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Re-enable TLS 1.0 and TLS 1.1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual-guides/u_e-update-hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run scripts before and after updates
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Client Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Client Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client-android/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Android
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client-apple/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apple macOS / iOS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client-emclient/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eM Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client-kontact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KDE Kontact
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client-outlook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microsoft Outlook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client-thunderbird/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mozilla Thunderbird
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../client/client-manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Third party apps (community managed)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Third party apps (community managed)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../abuseipdb/third_party-abuseipdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AbuseIPDB Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../borgmatic/third_party-borgmatic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Borgmatic Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../checkmk/u_e-checkmk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CheckMK
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exchange_onprem/third_party-exchange_onprem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exchange Hybrid Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gitea/third_party-gitea/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitea
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gogs/third_party-gogs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gogs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mailman3/third_party-mailman3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mailman 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mailpiler/third_party-mailpiler_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mailpiler Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nextcloud/third_party-nextcloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nextcloud
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portainer/third_party-portainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Portainer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Roundcube
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Roundcube
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Roundcube
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrated-install" class="md-nav__link">
    <span class="md-ellipsis">
      Integrated Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrated Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-on-composer-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Note on composer usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-spellchecking" class="md-nav__link">
    <span class="md-ellipsis">
      Optional: Spellchecking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-mime-type-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Install mime type mappings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-roundcube-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create roundcube database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roundcube-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Roundcube configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-database" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webserver-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Webserver configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-and-remove-installer" class="md-nav__link">
    <span class="md-ellipsis">
      Disable and remove installer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-roundcube-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Update roundcube dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow-plaintext-authentication-for-the-php-fpm-container-without-using-tls" class="md-nav__link">
    <span class="md-ellipsis">
      Allow plaintext authentication for the php-fpm container without using TLS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ofelia-job-for-roundcube-housekeeping" class="md-nav__link">
    <span class="md-ellipsis">
      Ofelia job for roundcube housekeeping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standalone-install" class="md-nav__link">
    <span class="md-ellipsis">
      Standalone Install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webserver-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Webserver configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-roundcube-database_1" class="md-nav__link">
    <span class="md-ellipsis">
      Create roundcube database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-add-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Optional: Add Plugins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Start Roundcube
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-extra-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Optional extra functionality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Optional extra functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-change-password-function-in-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Enable change password function in Roundcube
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrate-carddav-addressbooks-in-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Integrate CardDAV addressbooks in Roundcube
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forward-the-client-network-address-to-dovecot" class="md-nav__link">
    <span class="md-ellipsis">
      Forward the client network address to dovecot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-roundcube-link-to-mailcow-apps-list" class="md-nav__link">
    <span class="md-ellipsis">
      Add roundcube link to mailcow Apps list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#let-admins-log-into-roundcube-without-password" class="md-nav__link">
    <span class="md-ellipsis">
      Let admins log into Roundcube without password
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finish-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Finish installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrading Roundcube
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Upgrading Roundcube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-composer-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade composer plugins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrade-mime-type-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade mime type mappings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstalling-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Uninstalling roundcube
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uninstalling roundcube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-the-web-directory" class="md-nav__link">
    <span class="md-ellipsis">
      Remove the web directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Remove the database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-any-custom-configuration-files-we-added-to-mailcow" class="md-nav__link">
    <span class="md-ellipsis">
      Remove any custom configuration files we added to mailcow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-older-mailcow-roundcube-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Migration from older mailcow roundcube setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration from older mailcow roundcube setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-new-roundcube-database-user-and-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create new roundcube database user and database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrate-roundcube-data-from-mailcow-database" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate roundcube data from mailcow database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-roundcube-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Update roundcube configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-rcmcarddav-plugin-to-composer-installation-method" class="md-nav__link">
    <span class="md-ellipsis">
      Switch RCMCardDAV plugin to composer installation method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-roundcube-to-new-database" class="md-nav__link">
    <span class="md-ellipsis">
      Switch roundcube to new database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#re-enable-roundcube-web-access" class="md-nav__link">
    <span class="md-ellipsis">
      Re-enable roundcube web access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Other changes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-roundcube-tables-from-mailcow-database" class="md-nav__link">
    <span class="md-ellipsis">
      Removing roundcube tables from mailcow database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheus_exporter/third_party-prometheus_exporter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus Exporter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Roundcube
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrated-install" class="md-nav__link">
    <span class="md-ellipsis">
      Integrated Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrated Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-on-composer-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Note on composer usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-spellchecking" class="md-nav__link">
    <span class="md-ellipsis">
      Optional: Spellchecking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-mime-type-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Install mime type mappings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-roundcube-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create roundcube database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#roundcube-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Roundcube configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-database" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webserver-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Webserver configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-and-remove-installer" class="md-nav__link">
    <span class="md-ellipsis">
      Disable and remove installer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-roundcube-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Update roundcube dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow-plaintext-authentication-for-the-php-fpm-container-without-using-tls" class="md-nav__link">
    <span class="md-ellipsis">
      Allow plaintext authentication for the php-fpm container without using TLS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ofelia-job-for-roundcube-housekeeping" class="md-nav__link">
    <span class="md-ellipsis">
      Ofelia job for roundcube housekeeping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standalone-install" class="md-nav__link">
    <span class="md-ellipsis">
      Standalone Install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#webserver-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Webserver configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-roundcube-database_1" class="md-nav__link">
    <span class="md-ellipsis">
      Create roundcube database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-add-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Optional: Add Plugins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Start Roundcube
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-extra-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Optional extra functionality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Optional extra functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-change-password-function-in-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Enable change password function in Roundcube
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrate-carddav-addressbooks-in-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Integrate CardDAV addressbooks in Roundcube
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forward-the-client-network-address-to-dovecot" class="md-nav__link">
    <span class="md-ellipsis">
      Forward the client network address to dovecot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-roundcube-link-to-mailcow-apps-list" class="md-nav__link">
    <span class="md-ellipsis">
      Add roundcube link to mailcow Apps list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#let-admins-log-into-roundcube-without-password" class="md-nav__link">
    <span class="md-ellipsis">
      Let admins log into Roundcube without password
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finish-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Finish installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrading Roundcube
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Upgrading Roundcube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-composer-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade composer plugins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrade-mime-type-mappings" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade mime type mappings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstalling-roundcube" class="md-nav__link">
    <span class="md-ellipsis">
      Uninstalling roundcube
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Uninstalling roundcube">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-the-web-directory" class="md-nav__link">
    <span class="md-ellipsis">
      Remove the web directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Remove the database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-any-custom-configuration-files-we-added-to-mailcow" class="md-nav__link">
    <span class="md-ellipsis">
      Remove any custom configuration files we added to mailcow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-from-older-mailcow-roundcube-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Migration from older mailcow roundcube setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration from older mailcow roundcube setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-new-roundcube-database-user-and-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create new roundcube database user and database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrate-roundcube-data-from-mailcow-database" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate roundcube data from mailcow database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-roundcube-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Update roundcube configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-rcmcarddav-plugin-to-composer-installation-method" class="md-nav__link">
    <span class="md-ellipsis">
      Switch RCMCardDAV plugin to composer installation method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-roundcube-to-new-database" class="md-nav__link">
    <span class="md-ellipsis">
      Switch roundcube to new database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#re-enable-roundcube-web-access" class="md-nav__link">
    <span class="md-ellipsis">
      Re-enable roundcube web access
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Other changes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-roundcube-tables-from-mailcow-database" class="md-nav__link">
    <span class="md-ellipsis">
      Removing roundcube tables from mailcow database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Roundcube</h1>

<h2 id="installing-roundcube">Installing Roundcube<a class="headerlink" href="#installing-roundcube" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless otherwise stated, all of the given commands are expected to be executed in the mailcow installation directory,
i.e., the directory containing <code>mailcow.conf</code> etc. Please do not blindly execute the commands but understand what they
do. None of the commands is supposed to produce an error, so if you encounter an error, fix it if necessary before
continuing with the subsequent commands.</p>
</div>
<h2 id="integrated-install">Integrated Install<a class="headerlink" href="#integrated-install" title="Permanent link">&para;</a></h2>
<h3 id="note-on-composer-usage">Note on composer usage<a class="headerlink" href="#note-on-composer-usage" title="Permanent link">&para;</a></h3>
<p>This guide uses composer to update roundcube dependencies or install / update roundcube plugins.</p>
<p>The roundcube-plugin-installer composer plugin has a <a href="https://github.com/roundcube/plugin-installer/issues/38">design issue</a>
that can lead to composer errors when packages are upgraded or uninstalled in the composer execution.</p>
<p>The error message will typically tell you that a <code>require</code> in <code>autoload_real.php</code> failed because a file could not be
opened. Example:</p>
<div class="highlight"><pre><span></span><code>In autoload_real.php line 43:
  require(/web/rc/vendor/composer/../guzzlehttp/promises/src/functions_include.php): Failed to open stream: No such file or directory
</code></pre></div>
<p>Unfortunately these occur quite frequently, but they can be worked around by updating the autoloader and re-running the
failed command:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/web/rc<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>composer<span class="w"> </span>dump-autoload<span class="w"> </span>-o
<span class="c1"># Now execute the command that failed again</span>
</code></pre></div>
<h3 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h3>
<p>First we load <code>mailcow.conf</code> so we have access to the mailcow configuration settings for the following commands.</p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>mailcow.conf
</code></pre></div>
<p>Download Roundcube 1.6.x (check for latest release and adapt URL) to the web directory and extract it (here <code>rc/</code>):</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-m<span class="w"> </span><span class="m">755</span><span class="w"> </span>data/web/rc
wget<span class="w"> </span>-O<span class="w"> </span>-<span class="w"> </span>https://github.com/roundcube/roundcubemail/releases/download/1.6.11/roundcubemail-1.6.11-complete.tar.gz<span class="w"> </span><span class="p">|</span><span class="w"> </span>tar<span class="w"> </span>-xvz<span class="w"> </span>--no-same-owner<span class="w"> </span>-C<span class="w"> </span>data/web/rc<span class="w"> </span>--strip-components<span class="o">=</span><span class="m">1</span><span class="w"> </span>-f<span class="w"> </span>-
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>chown<span class="w"> </span>www-data:www-data<span class="w"> </span>/web/rc/logs<span class="w"> </span>/web/rc/temp
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>chown<span class="w"> </span>root:www-data<span class="w"> </span>/web/rc/config
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>chmod<span class="w"> </span><span class="m">750</span><span class="w"> </span>/web/rc/logs<span class="w"> </span>/web/rc/temp<span class="w"> </span>/web/rc/config
</code></pre></div>
<h3 id="optional-spellchecking">Optional: Spellchecking<a class="headerlink" href="#optional-spellchecking" title="Permanent link">&para;</a></h3>
<p>If you need spell check features, create a file <code>data/hooks/phpfpm/aspell.sh</code> with the following content, then
<code>chmod +x data/hooks/phpfpm/aspell.sh</code>. This installs a local spell check engine. Note, most modern web browsers have
built in spell check, so you may not want/need this.</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
apk<span class="w"> </span>update
apk<span class="w"> </span>add<span class="w"> </span>aspell-en<span class="w"> </span><span class="c1"># or any other language</span>
</code></pre></div>
<h3 id="install-mime-type-mappings">Install mime type mappings<a class="headerlink" href="#install-mime-type-mappings" title="Permanent link">&para;</a></h3>
<p>Download the <code>mime.types</code> file as it is not included in the php-fpm container.</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>-O<span class="w"> </span>data/web/rc/config/mime.types<span class="w"> </span>http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types
</code></pre></div>
<h3 id="create-roundcube-database">Create roundcube database<a class="headerlink" href="#create-roundcube-database" title="Permanent link">&para;</a></h3>
<p>Create a database for roundcube in the mailcow MySQL container. This creates a new <code>roundcube</code> database user
with a random password, which will be echoed to the shell and stored in a shell variable for use by later
commands. Note that when you interrupt the process and continue in a new shell, you must set the <code>DBROUNDCUBE</code>
shell variable manually to the password output by the following commands.</p>
<div class="highlight"><pre><span></span><code><span class="nv">DBROUNDCUBE</span><span class="o">=</span><span class="k">$(</span><span class="nv">LC_ALL</span><span class="o">=</span>C<span class="w"> </span>&lt;/dev/urandom<span class="w"> </span>tr<span class="w"> </span>-dc<span class="w"> </span>A-Za-z0-9<span class="w"> </span><span class="m">2</span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-c<span class="w"> </span><span class="m">28</span><span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span>Database<span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>user<span class="w"> </span>roundcube<span class="w"> </span>is<span class="w"> </span><span class="nv">$DBROUNDCUBE</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;CREATE DATABASE roundcubemail CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;&quot;</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;CREATE USER &#39;roundcube&#39;@&#39;%&#39; IDENTIFIED BY &#39;</span><span class="si">${</span><span class="nv">DBROUNDCUBE</span><span class="si">}</span><span class="s2">&#39;;&quot;</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;GRANT ALL PRIVILEGES ON roundcubemail.* TO &#39;roundcube&#39;@&#39;%&#39;;&quot;</span>
</code></pre></div>
<h3 id="roundcube-configuration">Roundcube configuration<a class="headerlink" href="#roundcube-configuration" title="Permanent link">&para;</a></h3>
<p>Create a file <code>data/web/rc/config/config.inc.php</code> with the following content.</p>
<ul>
<li>The <code>des_key</code> option is set to a random value. It is used to temporarily store your IMAP password.</li>
<li>The plugins list can be adapted to your preference. I added a set of standard plugins that I consider of common
  usefulness and which work well together with mailcow:</li>
<li>The archive plugin adds an archive button that moves selected messages to a user-configurable archive folder.</li>
<li>The managesieve plugin provides a user-friendly interface to manage server-side mail filtering and vacation / out
    of office notification.</li>
<li>The acl plugin allows to manage access control lists on IMAP folders, including the ability to share IMAP folders
    to other users.</li>
<li>The markasjunk plugin adds buttons to mark selected messages as junk (or messages in the junk folder not as junk)
    and moves them to the junk folder or back to the inbox. The sieve filters included with mailcow will take care
    that action triggers a learn as spam/ham action in rspamd, so no further configuration of the plugin is needed.</li>
<li>The zipdownload plugin allows to download multiple message attachments or messages as a zip file.</li>
<li>If you didn't install spell check in the above step, remove <code>spellcheck_engine</code> parameter.</li>
</ul>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/web/rc/config/config.inc.php</span>
<span class="s">&lt;?php</span>
<span class="s">\$config[&#39;db_dsnw&#39;] = &#39;mysql://roundcube:${DBROUNDCUBE}@mysql/roundcubemail&#39;;</span>
<span class="s">\$config[&#39;imap_host&#39;] = &#39;dovecot:143&#39;;</span>
<span class="s">\$config[&#39;smtp_host&#39;] = &#39;postfix:588&#39;;</span>
<span class="s">\$config[&#39;smtp_user&#39;] = &#39;%u&#39;;</span>
<span class="s">\$config[&#39;smtp_pass&#39;] = &#39;%p&#39;;</span>
<span class="s">\$config[&#39;support_url&#39;] = &#39;&#39;;</span>
<span class="s">\$config[&#39;product_name&#39;] = &#39;Roundcube Webmail&#39;;</span>
<span class="s">\$config[&#39;cipher_method&#39;] = &#39;chacha20-poly1305&#39;;</span>
<span class="s">\$config[&#39;des_key&#39;] = &#39;$(LC_ALL=C &lt;/dev/urandom tr -dc &quot;A-Za-z0-9 !#$%&amp;()*+,-./:;&lt;=&gt;?@[\\]^_{|}~&quot; 2&gt; /dev/null | head -c 32)&#39;;</span>
<span class="s">\$config[&#39;plugins&#39;] = [</span>
<span class="s">  &#39;archive&#39;,</span>
<span class="s">  &#39;managesieve&#39;,</span>
<span class="s">  &#39;acl&#39;,</span>
<span class="s">  &#39;markasjunk&#39;,</span>
<span class="s">  &#39;zipdownload&#39;,</span>
<span class="s">];</span>
<span class="s">\$config[&#39;spellcheck_engine&#39;] = &#39;aspell&#39;;</span>
<span class="s">\$config[&#39;mime_types&#39;] = &#39;/web/rc/config/mime.types&#39;;</span>
<span class="s">\$config[&#39;enable_installer&#39;] = true;</span>

<span class="s">\$config[&#39;managesieve_host&#39;] = &#39;dovecot:4190&#39;;</span>
<span class="s">// Enables separate management interface for vacation responses (out-of-office)</span>
<span class="s">// 0 - no separate section (default); 1 - add Vacation section; 2 - add Vacation section, but hide Filters section</span>
<span class="s">\$config[&#39;managesieve_vacation&#39;] = 1;</span>
<span class="s">EOCONFIG</span>

docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>chown<span class="w"> </span>root:www-data<span class="w"> </span>/web/rc/config/config.inc.php
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>chmod<span class="w"> </span><span class="m">640</span><span class="w"> </span>/web/rc/config/config.inc.php
</code></pre></div>
<h3 id="initialize-database">Initialize database<a class="headerlink" href="#initialize-database" title="Permanent link">&para;</a></h3>
<p>Point your browser to <code>https://myserver/rc/installer</code>. Check that the website shows no "NOT OK" check results on
any of the steps, some "NOT AVAILABLE" are expected regarding different database extensions of which we only need MySQL.
Initialize the database and leave the installer. It is not necessary to update the configuration with
the downloaded one, unless you made some settings in the installer you would like to take over.</p>
<h3 id="webserver-configuration">Webserver configuration<a class="headerlink" href="#webserver-configuration" title="Permanent link">&para;</a></h3>
<p>The roundcube directory includes some locations that we do not want to serve to web users. We add a configuration
extension to nginx to only expose the public directory of roundcube.</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/conf/nginx/site.roundcube.custom</span>
<span class="s">location /rc/ {</span>
<span class="s">  alias /web/rc/public_html/;</span>
<span class="s">}</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<h3 id="disable-and-remove-installer">Disable and remove installer<a class="headerlink" href="#disable-and-remove-installer" title="Permanent link">&para;</a></h3>
<p>Delete the directory <code>data/web/rc/installer</code> after a successful installation, and set the <code>enable_installer</code> option
to false in <code>data/web/rc/config/config.inc.php</code>:</p>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>-r<span class="w"> </span>data/web/rc/installer
sed<span class="w"> </span>-i<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;s/\(\$config\[&#39;enable_installer&#39;\].* = \)true/\1false/&quot;</span><span class="w"> </span>data/web/rc/config/config.inc.php
</code></pre></div>
<h3 id="update-roundcube-dependencies">Update roundcube dependencies<a class="headerlink" href="#update-roundcube-dependencies" title="Permanent link">&para;</a></h3>
<p>This step is not strictly necessary, but at least at the time of this writing the dependencies shipped with roundcube
included versions with security vulnerabilities, so it may be a good idea to update the dependencies to the latest
versions. For the same reason, it may be a good idea to run the composer update once in a while.</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>-n<span class="w"> </span>data/web/rc/composer.json-dist<span class="w"> </span>data/web/rc/composer.json
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/web/rc<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>composer<span class="w"> </span>update<span class="w"> </span>--no-dev<span class="w"> </span>-o
</code></pre></div>
<p>You can also use <code>composer audit</code> to check for any reported security issues with the installed set of composer packages:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/web/rc<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>composer<span class="w"> </span>audit
</code></pre></div>
<h3 id="allow-plaintext-authentication-for-the-php-fpm-container-without-using-tls">Allow plaintext authentication for the php-fpm container without using TLS<a class="headerlink" href="#allow-plaintext-authentication-for-the-php-fpm-container-without-using-tls" title="Permanent link">&para;</a></h3>
<p>We need to allow plaintext authentication in dovecot over unencrypted connection (inside the container network), which
is per default mailcow installation only possible for the SOGo container for the very same purpose. Afterwards restart
the dovecot container so the change becomes effective.</p>
<div class="highlight"><pre><span></span><code>cat<span class="w">  </span><span class="s">&lt;&lt;EOCONFIG &gt;&gt;data/conf/dovecot/extra.conf</span>
<span class="s">remote ${IPV4_NETWORK}.0/24 {</span>
<span class="s">  disable_plaintext_auth = no</span>
<span class="s">}</span>
<span class="s">remote ${IPV6_NETWORK} {</span>
<span class="s">  disable_plaintext_auth = no</span>
<span class="s">}</span>
<span class="s">EOCONFIG</span>

docker<span class="w"> </span>compose<span class="w"> </span>restart<span class="w"> </span>dovecot-mailcow
</code></pre></div>
<h3 id="ofelia-job-for-roundcube-housekeeping">Ofelia job for roundcube housekeeping<a class="headerlink" href="#ofelia-job-for-roundcube-housekeeping" title="Permanent link">&para;</a></h3>
<p>Roundcube needs to clean some stale information from the database every once in a while,
for which we will create an ofelia job that runs the roundcube <code>cleandb.sh</code> script.</p>
<p>To do this, add the following to <code>docker-compose.override.yml</code> (if you already have some
adaptations for the php-fpm container, add the labels to the existing section):</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">php-fpm-mailcow</span><span class="p">:</span>
<span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ofelia.enabled</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">ofelia.job-exec.roundcube_cleandb.schedule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@every</span><span class="nv"> </span><span class="s">168h&quot;</span>
<span class="w">      </span><span class="nt">ofelia.job-exec.roundcube_cleandb.user</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;www-data&quot;</span>
<span class="w">      </span><span class="nt">ofelia.job-exec.roundcube_cleandb.command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/bin/bash</span><span class="nv"> </span><span class="s">-c</span><span class="nv"> </span><span class="s">&quot;[</span><span class="nv"> </span><span class="s">-f</span><span class="nv"> </span><span class="s">/web/rc/bin/cleandb.sh</span><span class="nv"> </span><span class="s">]</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">/web/rc/bin/cleandb.sh&quot;&#39;</span>
</code></pre></div>
<h3 id="standalone-install">Standalone Install<a class="headerlink" href="#standalone-install" title="Permanent link">&para;</a></h3>
<p>To Install Roundcube in its own Docker Container you have to add the following into your <code>docker-compose.yaml</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>

<span class="w">  </span><span class="nt">roundcube</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">roundcube/roundcubemail:1.6.11-apache</span><span class="w"> </span><span class="c1"># See newest version https://hub.docker.com/r/roundcube/roundcubemail/tags?name=apache</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">IPV4_NETWORK</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${IPV4_NETWORK:-172.22.1}</span>
<span class="w">      </span><span class="nt">IPV6_NETWORK</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${IPV6_NETWORK:-fd4d:6169:6c63:6f77::/64}</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_DB_TYPE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_DB_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_DB_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">roundcube</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_DB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${DBROUNDCUBE}</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_DB_NAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">roundcubemail</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_DEFAULT_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssl://dovecot:143</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_SMTP_SERVER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssl://postfix:587</span>
<span class="w">      </span><span class="nt">ROUNDCUBEMAIL_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">archive, managesieve, acl, markasjunk, zipdownload</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># == Documentation Compatibility ==</span>
<span class="w">      </span><span class="c1"># These mounts are setup to match the ones from the Integrated Installation</span>
<span class="w">      </span><span class="c1"># But it is recommended to not mount these inside of web/rc because said folder is also mounted into the php-fpm Container</span>
<span class="w">      </span><span class="c1"># - ./data/web/rc:/var/www/html</span>
<span class="w">      </span><span class="c1"># - ./data/web/rc/persistent-config:/var/roundcube/config</span>

<span class="w">      </span><span class="c1"># Advanced (less Compatibility with Documentation, but safer)</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./data/rc/main:/var/www/html</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./data/rc/config:/var/roundcube/config</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql-mailcow</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dovecot-mailcow</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="nt">mailcow-network</span><span class="p">:</span>
<span class="w">        </span><span class="nt">aliases</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">roundcube</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">proxy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h3 id="webserver-configuration_1">Webserver configuration<a class="headerlink" href="#webserver-configuration_1" title="Permanent link">&para;</a></h3>
<p>The roundcube directory includes some locations that we do not want to serve to web users. We add a configuration
extension to nginx to only expose the public directory of roundcube.</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/conf/nginx/site.roundcube.custom</span>
<span class="s">location /rc/ {</span>
<span class="s">    proxy_pass http://roundcube:80/;</span>
<span class="s">    proxy_set_header Host $host;</span>
<span class="s">    proxy_set_header X-Real-IP $remote_addr;</span>
<span class="s">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
<span class="s">    proxy_set_header X-Forwarded-Proto $scheme;</span>
<span class="s">    proxy_redirect off;</span>
<span class="s">}</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<h3 id="create-roundcube-database_1">Create roundcube database<a class="headerlink" href="#create-roundcube-database_1" title="Permanent link">&para;</a></h3>
<p>You may need to load the Environment Variables.</p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>mailcow.conf
</code></pre></div>
<p>Create a database for roundcube in the mailcow MySQL container. This creates a new <code>roundcube</code> database user
with a random password, which will be echoed to the shell and stored in a shell variable for use by later
commands. Note that when you interrupt the process and continue in a new shell, you must set the <code>DBROUNDCUBE</code>
shell variable manually to the password output by the following commands.</p>
<p>Generate a Password for the Roundcube Database by using</p>
<div class="highlight"><pre><span></span><code><span class="nv">LC_ALL</span><span class="o">=</span>C<span class="w"> </span>&lt;/dev/urandom<span class="w"> </span>tr<span class="w"> </span>-dc<span class="w"> </span>A-Za-z0-9<span class="w"> </span><span class="m">2</span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-c<span class="w"> </span><span class="m">28</span>
</code></pre></div>
<p>and add <code>DBROUNDCUBE</code> to your <code>mailcow.conf</code> file.</p>
<p>Then execute the following commands:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;CREATE DATABASE roundcubemail CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;&quot;</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;CREATE USER &#39;roundcube&#39;@&#39;%&#39; IDENTIFIED BY &#39;</span><span class="si">${</span><span class="nv">DBROUNDCUBE</span><span class="si">}</span><span class="s2">&#39;;&quot;</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;GRANT ALL PRIVILEGES ON roundcubemail.* TO &#39;roundcube&#39;@&#39;%&#39;;&quot;</span>
</code></pre></div>
<h3 id="optional-add-plugins">Optional: Add Plugins<a class="headerlink" href="#optional-add-plugins" title="Permanent link">&para;</a></h3>
<p>To enable Plugins add them to <code>ROUNDCUBEMAIL_PLUGINS</code>,
if a Plugin is not already installed add it to the <code>ROUNDCUBEMAIL_COMPOSER_PLUGINS</code> Environment Variable to ensure it is auto-installed on startup.</p>
<h3 id="start-roundcube">Start Roundcube<a class="headerlink" href="#start-roundcube" title="Permanent link">&para;</a></h3>
<p>After all of the steps above you can start the Roundcube Container with.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">docker compose (Plugin)</label><label for="__tabbed_1_2">docker-compose (Standalone)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>down
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>down
docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
</div>
</div>
</div>
<p><strong>Important notes about this configuration:</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the rest of this Documentation you will be asked to modify files inside of <code>data/web/rc/config</code> use <code>data/web/rc/persistent-config</code> or <code>data/rc/config</code> (Advanced) instead.
This is due to Roundcube auto-generating configs inside of <code>rc/main/config/</code> or <code>web/rc/config/</code> based on configs in <code>persistent-config/</code> / <code>data/rc/config/</code>.</p>
</div>
<p>If you chose to mount in the <em>Advanced</em> way notice folders like <code>plugins/</code> are located inside of <code>data/rc/main</code>.</p>
<h2 id="optional-extra-functionality">Optional extra functionality<a class="headerlink" href="#optional-extra-functionality" title="Permanent link">&para;</a></h2>
<h3 id="enable-change-password-function-in-roundcube">Enable change password function in Roundcube<a class="headerlink" href="#enable-change-password-function-in-roundcube" title="Permanent link">&para;</a></h3>
<p>Changing the mailcow password from the roundcube UI is supported via the password plugin. We will configure it to use
the mailcow API to update the password, which requires to enable the API first and to get the API key (read/write API
access required). The API can be enabled in the mailcow admin interface, where you can also find the API key.</p>
<p>Open <code>data/web/rc/config/config.inc.php</code> and enable the password plugin by adding it to the <code>$config['plugins']</code> array
or by adding it to <code>DBROUNDCUBEMAIL_PLUGINS</code>, for example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Integrated</label><label for="__tabbed_2_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="x">$config[&#39;plugins&#39;] = array(</span>
<span class="x">  &#39;archive&#39;,</span>
<span class="x">  &#39;managesieve&#39;,</span>
<span class="x">  &#39;acl&#39;,</span>
<span class="x">  &#39;markasjunk&#39;,</span>
<span class="x">  &#39;zipdownload&#39;,</span>
<span class="x">  &#39;password&#39;,</span>
<span class="x">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nt">ROUNDCUBEMAIL_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">archive, managesieve, acl, markasjunk, zipdownload, password</span>
</code></pre></div>
</div>
</div>
</div>
<p>Configure the password plugin (be sure to adapt <strong>**API_KEY**</strong> to you mailcow read/write API key):</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/web/rc/plugins/password/config.inc.php</span>
<span class="s">&lt;?php</span>
<span class="s">\$config[&#39;password_driver&#39;] = &#39;mailcow&#39;;</span>
<span class="s">\$config[&#39;password_confirm_current&#39;] = true;</span>
<span class="s">\$config[&#39;password_mailcow_api_host&#39;] = &#39;http://nginx&#39;;</span>
<span class="s">\$config[&#39;password_mailcow_api_token&#39;] = &#39;**API_KEY**&#39;;</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<p>Note: If you have changed the mailcow nginx configuration to redirect http requests to https
(e.g., as described <a href="https://docs.mailcow.email/manual-guides/u_e-80_to_443/">here</a>), then
directly talking to the nginx container via http will not work because nginx is not a hostname contained
in the certificate. In such cases, set <code>password_mailcow_api_host</code> in the above configuration to the
public URI instead:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/web/rc/plugins/password/config.inc.php</span>
<span class="s">&lt;?php</span>
<span class="s">\$config[&#39;password_driver&#39;] = &#39;mailcow&#39;;</span>
<span class="s">\$config[&#39;password_confirm_current&#39;] = true;</span>
<span class="s">\$config[&#39;password_mailcow_api_host&#39;] = &#39;https://${MAILCOW_HOSTNAME}&#39;;</span>
<span class="s">\$config[&#39;password_mailcow_api_token&#39;] = &#39;**API_KEY**&#39;;</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<h3 id="integrate-carddav-addressbooks-in-roundcube">Integrate CardDAV addressbooks in Roundcube<a class="headerlink" href="#integrate-carddav-addressbooks-in-roundcube" title="Permanent link">&para;</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Integrated</label><label for="__tabbed_3_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Install the latest v5 version (the config below is compatible with v5 releases) using composer.
Answer <code>Y</code> when asked if you want to activate the plugin.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/web/rc<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>composer<span class="w"> </span>require<span class="w"> </span>--update-no-dev<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;roundcube/carddav:~5&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Install the latest version of CardDAV (config based on v5 releases) by adding <code>carddav</code> to <code>ROUNDCUBEMAIL_PLUGINS</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">ROUNDCUBEMAIL_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">archive, managesieve, acl, markasjunk, zipdownload, carddav</span>
<span class="nt">ROUNDCUBEMAIL_COMPOSER_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;roundcube/carddav:~5&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p>Edit the file <code>data/web/rc/plugins/carddav/config.inc.php</code> and insert the following content:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/web/rc/plugins/carddav/config.inc.php</span>
<span class="s">&lt;?php</span>
<span class="s">\$prefs[&#39;_GLOBAL&#39;][&#39;pwstore_scheme&#39;] = &#39;des_key&#39;;</span>

<span class="s">\$prefs[&#39;SOGo&#39;] = [</span>
<span class="s">    &#39;accountname&#39;    =&gt; &#39;SOGo&#39;,</span>
<span class="s">    &#39;username&#39;       =&gt; &#39;%u&#39;,</span>
<span class="s">    &#39;password&#39;       =&gt; &#39;%p&#39;,</span>
<span class="s">    &#39;discovery_url&#39;  =&gt; &#39;http://sogo:20000/SOGo/dav/&#39;,</span>
<span class="s">    &#39;name&#39;           =&gt; &#39;%N&#39;,</span>
<span class="s">    &#39;use_categories&#39; =&gt; true,</span>
<span class="s">    &#39;fixed&#39;          =&gt; [&#39;username&#39;, &#39;password&#39;],</span>
<span class="s">];</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<p>RCMCardDAV will add all addressbooks of the user on login, including <strong>subscribed</strong> addressbooks shared to the user by
other users.</p>
<p>If you want to remove the default addressbooks (stored in the Roundcube database), so that only the CardDAV addressbooks
are accessible, append <code>$config['address_book_type'] = '';</code> to the config file <code>data/web/rc/config/config.inc.php</code>.</p>
<p>Note: RCMCardDAV uses additional database tables. After installing (or upgrading) RCMCardDAV, it is required to log
in roundcube (log out first if already logged in) because the database table creation / changes are performed only
during the login to roundcube.</p>
<h3 id="forward-the-client-network-address-to-dovecot">Forward the client network address to dovecot<a class="headerlink" href="#forward-the-client-network-address-to-dovecot" title="Permanent link">&para;</a></h3>
<p>Normally, the IMAP server dovecot will see the network address of the php-fpm container when roundcube interacts with the IMAP
server. Using an IMAP extension and the <code>dovecot_client_ip</code> roundcube plugin, it is possible for roundcube to tell
dovecot the client IP, so it will also show up in the logs as the remote IP. When doing this, login attempts will show in the
dovecot logs like any direct client connections to dovecot, and such failed logins into roundcube will be treated in the same
manner as failed direct IMAP logins, causing blocking of the client with the netfilter container or other mechanisms that may
already be in place to handle bruteforce attacks on the IMAP server.</p>
<p>For this, the roundcube plugin must be installed.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Integrated</label><label for="__tabbed_4_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/web/rc<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>composer<span class="w"> </span>require<span class="w"> </span>--update-no-dev<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;foorschtbar/dovecot_client_ip:~2&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">ROUNDCUBEMAIL_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">archive, managesieve, acl, markasjunk, zipdownload, dovecot_client_ip</span>
<span class="nt">ROUNDCUBEMAIL_COMPOSER_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foorschtbar/dovecot_client_ip:~2&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p>Edit the file <code>data/web/rc/config/config.inc.php</code> and insert the following content:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;&gt;data/web/rc/config/config.inc.php</span>
<span class="s">\$config[&#39;dovecot_client_ip_trusted_proxies&#39;] = [&#39;${IPV4_NETWORK}.0/24&#39;, &#39;${IPV6_NETWORK}&#39;];</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<p>Furthermore, we must configure dovecot to treat the php-fpm container as part of a trusted network so it is allowed to override
the client IP in the IMAP session. Note that this also enables plaintext authentication for the listed network ranges, so the
explicit overridings of <code>disable_plaintext_auth</code> done above are not necessary when using this.</p>
<div class="highlight"><pre><span></span><code>cat<span class="w">  </span><span class="s">&lt;&lt;EOCONFIG &gt;&gt;data/conf/dovecot/extra.conf</span>
<span class="s">login_trusted_networks = ${IPV4_NETWORK}.0/24 ${IPV6_NETWORK}</span>
<span class="s">EOCONFIG</span>

docker<span class="w"> </span>compose<span class="w"> </span>restart<span class="w"> </span>dovecot-mailcow
</code></pre></div>
<h3 id="add-roundcube-link-to-mailcow-apps-list">Add roundcube link to mailcow Apps list<a class="headerlink" href="#add-roundcube-link-to-mailcow-apps-list" title="Permanent link">&para;</a></h3>
<p>You can add Roundcube's link to the mailcow Apps list.
To do this, open or create <code>data/web/inc/vars.local.inc.php</code> and make sure it includes the following configuration
block:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="nv">$MAILCOW_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;SOGo&#39;</span><span class="p">,</span>
        <span class="s1">&#39;link&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/SOGo/&#39;</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Roundcube&#39;</span><span class="p">,</span>
        <span class="s1">&#39;link&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/rc/&#39;</span>
    <span class="p">]</span>
<span class="p">];</span>
</code></pre></div>
<h3 id="let-admins-log-into-roundcube-without-password">Let admins log into Roundcube without password<a class="headerlink" href="#let-admins-log-into-roundcube-without-password" title="Permanent link">&para;</a></h3>
<p>First, install plugin <a href="https://github.com/corbosman/dovecot_impersonate/">dovecot_impersonate</a> and add Roundcube as an app (see above).</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Integrated</label><label for="__tabbed_5_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/web/rc/plugins<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/corbosman/dovecot_impersonate.git
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/var/www/html/plugins<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>roundcube<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/corbosman/dovecot_impersonate.git
</code></pre></div>
</div>
</div>
</div>
<p>Open <code>data/web/rc/config/config.inc.php</code> and enable the dovecot_impersonate plugin by adding it to the <code>$config['plugins']</code> array or by adding it to <code>ROUNDCUBEMAIL_PLUGINS</code>. 
for example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Integrated</label><label for="__tabbed_6_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="x">$config[&#39;plugins&#39;] = array(</span>
<span class="x">  &#39;archive&#39;,</span>
<span class="x">  &#39;managesieve&#39;,</span>
<span class="x">  &#39;acl&#39;,</span>
<span class="x">  &#39;markasjunk&#39;,</span>
<span class="x">  &#39;zipdownload&#39;,</span>
<span class="x">  &#39;password&#39;,</span>
<span class="x">  &#39;dovecot_impersonate&#39;</span>
<span class="x">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">ROUNDCUBEMAIL_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">archive, managesieve, acl, markasjunk, zipdownload, dovecot_impersonate</span>
<span class="nt">ROUNDCUBEMAIL_COMPOSER_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="c1">#... We just installed so no need to add it here</span>
</code></pre></div>
</div>
</div>
</div>
<p>Edit <code>mailcow.conf</code> and add the following:</p>
<div class="highlight"><pre><span></span><code># Allow admins to log into Roundcube as email user (without any password)
# Roundcube with plugin dovecot_impersonate must be installed first

ALLOW_ADMIN_EMAIL_LOGIN_ROUNDCUBE=y
</code></pre></div>
<p>Edit <code>docker-compose.override.yml</code> and crate/extend the section for <code>php-fpm-mailcow</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">php-fpm-mailcow</span><span class="p">:</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ALLOW_ADMIN_EMAIL_LOGIN_ROUNDCUBE=${ALLOW_ADMIN_EMAIL_LOGIN_ROUNDCUBE:-n}</span>
</code></pre></div>
<p>Edit <code>data/web/js/site/mailbox.js</code> and the following code after <a href="https://github.com/mailcow/mailcow-dockerized/blob/2f9da5ae93d93bf62a8c2b7a5a6ae50a41170c48/data/web/js/site/mailbox.js#L485-L487"><code>if (ALLOW_ADMIN_EMAIL_LOGIN) { ... }</code></a></p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">ALLOW_ADMIN_EMAIL_LOGIN_ROUNDCUBE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">item</span><span class="p">.</span><span class="nx">action</span><span class="w"> </span><span class="o">+=</span>
<span class="w">        </span><span class="s1">&#39;&lt;a href=&quot;/rc-auth.php?login=&#39;</span><span class="w"> </span><span class="o">+</span>
<span class="w">        </span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">username</span><span class="p">)</span><span class="w"> </span><span class="o">+</span>
<span class="w">        </span><span class="s1">&#39;&quot; class=&quot;login_as btn btn-sm btn-xs-half btn-primary&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;bi bi-envelope-fill&quot;&gt;&lt;/i&gt; Roundcube&lt;/a&gt;&#39;</span>
<span class="p">}</span>
</code></pre></div>
<p>Add the following line to the array $template_data:</p>
<ul>
<li><code>data/web/admin/mailbox.php</code> <a href="https://github.com/mailcow/mailcow-dockerized/blob/master/data/web/admin/mailbox.php#L43-L56"><code>$template_data</code></a></li>
<li><code>data/web/domainadmin/mailbox.php</code> <a href="https://github.com/mailcow/mailcow-dockerized/blob/master/data/web/domainadmin/mailbox.php#L43-L56"><code>$template_data</code></a></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="x">  &#39;allow_admin_email_login_roundcube&#39; =&gt; (preg_match(&quot;/^([yY][eE][sS]|[yY])+$/&quot;, $_ENV[&quot;ALLOW_ADMIN_EMAIL_LOGIN_ROUNDCUBE&quot;])) ? &#39;true&#39; : &#39;false&#39;,</span>
</code></pre></div>
<p>Edit <code>data/web/templates/mailbox.twig</code> and add this code to the bottom of the <a href="https://github.com/mailcow/mailcow-dockerized/blob/2f9da5ae93d93bf62a8c2b7a5a6ae50a41170c48/data/web/templates/mailbox.twig#L49-L57">javascript section</a>:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">ALLOW_ADMIN_EMAIL_LOGIN_ROUNDCUBE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="nx">allow_admin_email_login_roundcube</span><span class="w"> </span><span class="p">}};</span>
</code></pre></div>
<p>Copy the contents of the following files from this <a href="https://gitlab.com/-/snippets/2038244">Snippet</a>:</p>
<ul>
<li><code>data/web/inc/lib/RoundcubeAutoLogin.php</code></li>
<li><code>data/web/rc-auth.php</code></li>
</ul>
<h2 id="finish-installation">Finish installation<a class="headerlink" href="#finish-installation" title="Permanent link">&para;</a></h2>
<p>Finally, restart mailcow</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">docker compose (Plugin)</label><label for="__tabbed_7_2">docker-compose (Standalone)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>down
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>down
docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>
</div>
</div>
</div>
<h2 id="upgrading-roundcube">Upgrading Roundcube<a class="headerlink" href="#upgrading-roundcube" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Integrated</label><label for="__tabbed_8_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Upgrading Roundcube is rather simple, go to the <a href="https://github.com/roundcube/roundcubemail/releases">GitHub releases</a>
page for Roundcube and get the link for the "complete.tar.gz" file for the wanted release. Then follow the below
commands and change the URL and Roundcube folder name if needed.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Enter a bash session of the mailcow PHP container</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>mailcowdockerized-php-fpm-mailcow-1<span class="w"> </span>bash

<span class="c1"># Install required upgrade dependency, then upgrade Roundcube to wanted release</span>
apk<span class="w"> </span>add<span class="w"> </span>rsync
<span class="nb">cd</span><span class="w"> </span>/tmp
wget<span class="w"> </span>-O<span class="w"> </span>-<span class="w"> </span>https://github.com/roundcube/roundcubemail/releases/download/1.6.11/roundcubemail-1.6.11-complete.tar.gz<span class="w"> </span><span class="p">|</span><span class="w"> </span>tar<span class="w"> </span>xfvz<span class="w"> </span>-
<span class="nb">cd</span><span class="w"> </span>roundcubemail-1.6.11
bin/installto.sh<span class="w"> </span>/web/rc

<span class="c1"># Type &#39;Y&#39; and press enter to upgrade your install of Roundcube</span>
<span class="c1"># Type &#39;N&#39; to &quot;Do you want me to fix your local configuration&quot; if prompted</span>

<span class="c1"># If you see &quot;NOTICE: Update dependencies by running php composer.phar update --no-dev&quot; run composer:</span>
<span class="nb">cd</span><span class="w"> </span>/web/rc
composer<span class="w"> </span>update<span class="w"> </span>--no-dev<span class="w"> </span>-o
<span class="c1"># If asked &quot;Do you trust &quot;roundcube/plugin-installer&quot; to execute code and wish to enable it now? (writes &quot;allow-plugins&quot; to composer.json) [y,n,d,?] &quot; hit y and continue.</span>

<span class="c1"># Remove leftover files</span>
rm<span class="w"> </span>-rf<span class="w"> </span>/tmp/roundcube*

<span class="c1"># If you&#39;re going from 1.5 to 1.6 please run the config file changes below</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/\$config\[&#39;default_host&#39;\].*</span>$<span class="s2">/\$config\[&#39;imap_host&#39;\]\ =\ &#39;dovecot:143&#39;\;/&quot;</span><span class="w"> </span>/web/rc/config/config.inc.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/\$config\[&#39;default_port&#39;\].*</span>$<span class="s2">/d&quot;</span><span class="w"> </span>/web/rc/config/config.inc.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/\$config\[&#39;smtp_server&#39;\].*</span>$<span class="s2">/\$config\[&#39;smtp_host&#39;\]\ =\ &#39;postfix:588&#39;\;/&quot;</span><span class="w"> </span>/web/rc/config/config.inc.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/\$config\[&#39;smtp_port&#39;\].*</span>$<span class="s2">/d&quot;</span><span class="w"> </span>/web/rc/config/config.inc.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/\$config\[&#39;managesieve_host&#39;\].*</span>$<span class="s2">/\$config\[&#39;managesieve_host&#39;\]\ =\ &#39;dovecot:4190&#39;\;/&quot;</span><span class="w"> </span>/web/rc/config/config.inc.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/\$config\[&#39;managesieve_port&#39;\].*</span>$<span class="s2">/d&quot;</span><span class="w"> </span>/web/rc/config/config.inc.php
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Upgrading Roundcube in Standalone <em>Mode</em> is really simple just update the Docker Image version:</p>
<div class="highlight"><pre><span></span><code><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">roundcube/roundcubemail:1.6.11-apache</span><span class="w"> </span><span class="c1"># 1.6.11 -&gt; 1.6.X (in the futur: 1.7.X)</span>
</code></pre></div>
<p>Roundcube will then after a restart automatically apply Migrations and update your Container.</p>
</div>
</div>
</div>
<h3 id="upgrade-composer-plugins">Upgrade composer plugins<a class="headerlink" href="#upgrade-composer-plugins" title="Permanent link">&para;</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Integrated</label><label for="__tabbed_9_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>To upgrade roundcube plugins installed using composer and dependencies (e.g. RCMCardDAV plugin), you can simply run
composer in the container:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-w<span class="w"> </span>/web/rc<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>php-fpm-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>composer<span class="w"> </span>update<span class="w"> </span>--no-dev<span class="w"> </span>-o
</code></pre></div>
</div>
<div class="tabbed-block">
<p>To update composer plugins increase the version number at the end of a import:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nt">ROUNDCUBEMAIL_COMPOSER_PLUGINS</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;roundcube/carddav:~4&quot;</span><span class="w"> </span><span class="c1"># increase to v5</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="upgrade-mime-type-mappings">Upgrade mime type mappings<a class="headerlink" href="#upgrade-mime-type-mappings" title="Permanent link">&para;</a></h3>
<p>To upgrade the mime type mappings, re-download them using the command in the
<a href="#install-mime-type-mappings">installation instructions</a>.</p>
<h2 id="uninstalling-roundcube">Uninstalling roundcube<a class="headerlink" href="#uninstalling-roundcube" title="Permanent link">&para;</a></h2>
<p>For the uninstallation, it is also assumed that the commands are executed in the mailcow installation directory and
that <code>mailcow.conf</code> has been sourced in the shell, see <a href="#preparation">Preparation</a> above.</p>
<h3 id="remove-the-web-directory">Remove the web directory<a class="headerlink" href="#remove-the-web-directory" title="Permanent link">&para;</a></h3>
<p>This deletes the roundcube installation and all plugins and dependencies that you may have installed,
including those installed with composer.</p>
<p>Note: This deletes also any custom configuration that you may have done in roundcube. If you want to preserve it, move it some
place else instead of deleting it.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Integrated</label><label for="__tabbed_10_2">Standalone</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>-r<span class="w"> </span>data/web/rc
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Stop the Roundcube Container:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">docker compose (Plugin)</label><label for="__tabbed_11_2">docker-compose (Standalone)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>down
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>down
</code></pre></div>
<p>Then you can safely delete <code>data/web/rc</code> / <code>data/rc/</code>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<h3 id="remove-the-database">Remove the database<a class="headerlink" href="#remove-the-database" title="Permanent link">&para;</a></h3>
<p>Note: This clears all data stored for roundcube. If you want to preserve it, you could use <code>mysqldump</code> before deleting the data,
or simply keep the database.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;DROP USER &#39;roundcube&#39;@&#39;%&#39;;&quot;</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;DROP DATABASE roundcubemail;&quot;</span>
</code></pre></div>
<h3 id="remove-any-custom-configuration-files-we-added-to-mailcow">Remove any custom configuration files we added to mailcow<a class="headerlink" href="#remove-any-custom-configuration-files-we-added-to-mailcow" title="Permanent link">&para;</a></h3>
<p>To determine these, please read through the installation steps and revert what you changed there.</p>
<h2 id="migration-from-older-mailcow-roundcube-setup">Migration from older mailcow roundcube setup<a class="headerlink" href="#migration-from-older-mailcow-roundcube-setup" title="Permanent link">&para;</a></h2>
<p>Older versions of this instruction used the mailcow database also for roundcube, with a configured name prefix
<code>mailcow_rc1</code> on all roundcube tables.</p>
<p>For the migration, it is also assumed that the commands are executed in the mailcow installation directory and
that <code>mailcow.conf</code> has been sourced in the shell, see <a href="#preparation">Preparation</a> above. The commands of the different
steps build on each other and must be executed in the same shell. Particularly, some steps set shell variables (most
importantly the <code>DBROUNDCUBE</code> variable with the database password of the roundcube database user) used in later steps.</p>
<h3 id="create-new-roundcube-database-user-and-database">Create new roundcube database user and database<a class="headerlink" href="#create-new-roundcube-database-user-and-database" title="Permanent link">&para;</a></h3>
<p>Follow the <a href="#create-roundcube-database">steps above</a> to create the roundcube database user and the separate database.</p>
<h3 id="migrate-roundcube-data-from-mailcow-database">Migrate roundcube data from mailcow database<a class="headerlink" href="#migrate-roundcube-data-from-mailcow-database" title="Permanent link">&para;</a></h3>
<p>Before starting the database migration, we disable roundcube to avoid further changes to the roundcube database tables
during the migration.</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/conf/nginx/site.roundcube.custom</span>
<span class="s">location ^~ /rc/ {</span>
<span class="s">  return 503;</span>
<span class="s">}</span>
<span class="s">EOCONFIG</span>
docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>nginx-mailcow<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</code></pre></div>
<p>Now we copy the roundcube data to the new database. We strip the database table prefix in the process, you may need to
adjust <code>mailcow_rc1</code> in case you used a different prefix. It is also possible to keep the prefix (then also keep the
respective <code>db_prefix</code> roundcube setting). Then amend the foreign keys.</p>
<div class="highlight"><pre><span></span><code><span class="nv">RCTABLES</span><span class="o">=</span><span class="k">$(</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-sN<span class="w"> </span>mailcow<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;show tables like &#39;mailcow_rc1%&#39;;&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39;\n\r&#39;</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="k">)</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>/bin/bash<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;mysqldump -uroot -p</span><span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="s2"> mailcow </span><span class="nv">$RCTABLES</span><span class="s2"> | sed &#39;s/mailcow_rc1//&#39; | mysql -uroot -p</span><span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="s2"> roundcubemail&quot;</span>
<span class="nv">FOREIGNKEYS</span><span class="o">=</span><span class="k">$(</span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-sN<span class="w"> </span>mailcow<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;SELECT CONCAT(&#39;ALTER TABLE \`&#39;, TABLE_NAME, &#39;\` &#39;, &#39;DROP FOREIGN KEY \`&#39;, CONSTRAINT_NAME, &#39;\`;&#39;, &#39;ALTER TABLE \`&#39;, TABLE_NAME, &#39;\` &#39;, &#39;ADD FOREIGN KEY \`&#39;, CONSTRAINT_NAME, &#39;\` (&#39;, COLUMN_NAME, &#39;) &#39;, &#39;REFERENCES \`&#39;, REPLACE(REFERENCED_TABLE_NAME, &#39;mailcow_rc1&#39;, &#39;&#39;), &#39;\` (&#39;, REFERENCED_COLUMN_NAME, &#39;);&#39;) FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE TABLE_SCHEMA = &#39;roundcubemail&#39; AND REFERENCED_TABLE_NAME IS NOT NULL;&quot;</span><span class="k">)</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>roundcubemail<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$FOREIGNKEYS</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="update-roundcube-configuration">Update roundcube configuration<a class="headerlink" href="#update-roundcube-configuration" title="Permanent link">&para;</a></h3>
<p>Run the following to remove the no longer required <code>db_prefix</code> option. We also enable logging of roundcube by removing
the settings <code>log_dir</code> and <code>temp_dir</code> that were part of the old setup instructions.</p>
<div class="highlight"><pre><span></span><code>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/\$config\[&#39;db_prefix&#39;\].*</span>$<span class="s2">/d&quot;</span><span class="w"> </span>data/web/rc/config/config.inc.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/\$config\[&#39;log_dir&#39;\].*</span>$<span class="s2">/d&quot;</span><span class="w"> </span>data/web/rc/config/config.inc.php
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/\$config\[&#39;temp_dir&#39;\].*</span>$<span class="s2">/d&quot;</span><span class="w"> </span>data/web/rc/config/config.inc.php
</code></pre></div>
<p>We need to adapt the nginx configuration for roundcube to not expose the non-public folders of roundcube, specifically
those containing temporary files and log files:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;data/conf/nginx/site.roundcube.custom</span>
<span class="s">location /rc/ {</span>
<span class="s">  alias /web/rc/public_html/;</span>
<span class="s">}</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<p>We can also update the <code>cipher_method</code> to a more secure one but mind that data previously encrypted by roundcube cannot
be decrypted anymore afterwards. This specifically affects stored CardDAV passwords if you use RCMCardDAV and your
users added custom addressbooks (the preset will be fixed automatically upon next login of the user). If you want to
change the <code>cipher_method</code>, run:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;&gt;data/web/rc/config/config.inc.php</span>
<span class="s">\$config[&#39;cipher_method&#39;] = &#39;chacha20-poly1305&#39;;</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<h3 id="switch-rcmcarddav-plugin-to-composer-installation-method">Switch RCMCardDAV plugin to composer installation method<a class="headerlink" href="#switch-rcmcarddav-plugin-to-composer-installation-method" title="Permanent link">&para;</a></h3>
<p>This is optional but will align your installation with these instructions and enable you to upgrade RCMCardDAV
using composer. This is simply done by deleting the carddav plugin from the installation and installing it using
composer according to the <a href="#integrate-carddav-addressbooks-in-roundcube">instructions above</a>, which include the creation
of a new RCMCardDAV v5 config. In case you modified your RCMCardDAV configuration file, you may want to backup it before
deleting the plugin and carry over your changes to the new configuration afterwards as well.</p>
<p>To delete the carddav plugin run the following command, then re-install according to the
<a href="#integrate-carddav-addressbooks-in-roundcube">instructions above</a>:</p>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>-r<span class="w"> </span>data/web/rc/plugins/carddav
</code></pre></div>
<h3 id="switch-roundcube-to-new-database">Switch roundcube to new database<a class="headerlink" href="#switch-roundcube-to-new-database" title="Permanent link">&para;</a></h3>
<p>First adapt the roundcube configuration to use the new database.</p>
<div class="highlight"><pre><span></span><code>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;/\$config\[&#39;db_dsnw&#39;\].*</span>$<span class="s2">/d&quot;</span><span class="w"> </span>data/web/rc/config/config.inc.php
cat<span class="w"> </span><span class="s">&lt;&lt;EOCONFIG &gt;&gt;data/web/rc/config/config.inc.php</span>
<span class="s">\$config[&#39;db_dsnw&#39;] = &#39;mysql://roundcube:${DBROUNDCUBE}@mysql/roundcubemail&#39;;</span>
<span class="s">EOCONFIG</span>
</code></pre></div>
<h3 id="re-enable-roundcube-web-access">Re-enable roundcube web access<a class="headerlink" href="#re-enable-roundcube-web-access" title="Permanent link">&para;</a></h3>
<p>Execute the chown and chmod commands on sensitive roundcube directories listed in <a href="#preparation">Preparation</a>, to
make sure the nginx webserver cannot access files it is not supposed to serve.</p>
<p>Then re-enable web access to roundcube by replacing our temporary roundcube custom config for the one described
<a href="#webserver-configuration">above</a>, and reload the nginx configuration:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>nginx-mailcow<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</code></pre></div>
<h3 id="other-changes">Other changes<a class="headerlink" href="#other-changes" title="Permanent link">&para;</a></h3>
<p>You must also adapt the configuration of the roundcube password plugin according to this instruction, specifically if
you use the password changing functionality, since the old instruction directly changed the password in the database,
whereas this version of the instruction uses the mailcow API for the password change.</p>
<p>Regarding other changes and additions (e.g., dovecot_client_ip plugin), you can go through the current
installation instructions and adapt your configuration accordingly or perform the listed installation steps for new
additions.</p>
<p>Specifically, consider the following sections:</p>
<ul>
<li><a href="#ofelia-job-for-roundcube-housekeeping">Ofelia job for roundcube housekeeping</a></li>
<li><a href="#allow-plaintext-authentication-for-the-php-fpm-container-without-using-tls">Allow plaintext authentication in dovecot</a>,
  if you adapt the roundcube configuration to contact dovecot via non-encrypted IMAP connection.</li>
<li><a href="#forward-the-client-network-address-to-dovecot">Forward the client network address to dovecot</a></li>
</ul>
<h3 id="removing-roundcube-tables-from-mailcow-database">Removing roundcube tables from mailcow database<a class="headerlink" href="#removing-roundcube-tables-from-mailcow-database" title="Permanent link">&para;</a></h3>
<p>After you have verified that the migration was successful and roundcube works using the separate database, you can remove
the roundcube tables from the mailcow database using the following command:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="nv">name</span><span class="o">=</span>mysql-mailcow<span class="w"> </span>-q<span class="k">)</span><span class="w"> </span>mysql<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="si">${</span><span class="nv">DBROOT</span><span class="si">}</span><span class="w"> </span>-sN<span class="w"> </span>mailcow<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;SET SESSION foreign_key_checks = 0; DROP TABLE IF EXISTS </span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$RCTABLES</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/ \+/,/g&#39;</span><span class="k">)</span><span class="s2">;&quot;</span>
</code></pre></div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime" title="August 16, 2025 18:09:59 CEST">2025-08-16 18:09:59</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; <script>document.write(new Date().getFullYear())</script> mailcow Team & Community
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://mailcow.email" target="_blank" rel="noopener" title="mailcow.email" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/mailcow" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/mailcow_email" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
    
    
      
    
    
    
      
      
    
    <a href="https://mailcow.social/@doncow" target="_blank" rel="noopener me" title="mailcow.social" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M433 179.1c0-97.2-63.7-125.7-63.7-125.7-62.5-28.7-228.6-28.4-290.5 0 0 0-63.7 28.5-63.7 125.7 0 115.7-6.6 259.4 105.6 289.1 40.5 10.7 75.3 13 103.3 11.4 50.8-2.8 79.3-18.1 79.3-18.1l-1.7-36.9s-36.3 11.4-77.1 10.1c-40.4-1.4-83-4.4-89.6-54-.6-4.6-.9-9.3-.9-13.9 85.6 20.9 158.7 9.1 178.7 6.7 56.1-6.7 105-41.3 111.2-72.9 9.8-49.8 9-121.5 9-121.5zm-75.1 125.2h-46.6V190.1c0-49.7-64-51.6-64 6.9v62.5H201V197c0-58.5-64-56.6-64-6.9v114.2H90.3c0-122.1-5.2-147.9 18.4-175 25.9-28.9 79.8-30.8 103.8 6.1l11.6 19.5 11.6-19.5c24.1-37.1 78.1-34.8 103.8-6.1 23.7 27.3 18.4 53 18.4 175"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.top", "navigation.tracking", "announce.dismiss", "content.tabs.link", "content.tooltips", "content.code.copy", "search.share", "search.highlight"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../../assets/javascripts/client.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>